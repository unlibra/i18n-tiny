"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[273],{7964(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"astro/usage","title":"Usage","description":"1. Create Messages","source":"@site/docs/astro/usage.md","sourceDirName":"astro","slug":"/astro/usage","permalink":"/i18n-tiny/astro/usage","draft":false,"unlisted":false,"editUrl":"https://github.com/unlibra/i18n-tiny/tree/main/website/docs/astro/usage.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"astroSidebar","previous":{"title":"Installation","permalink":"/i18n-tiny/astro/installation"},"next":{"title":"API Reference","permalink":"/i18n-tiny/astro/api-reference"}}');var a=s(4848),i=s(8453);const r={sidebar_position:3},o="Usage",c={},d=[{value:"1. Create Messages",id:"1-create-messages",level:2},{value:"2. Define i18n Instance",id:"2-define-i18n-instance",level:2},{value:"3. Advanced Setup (Optional)",id:"3-advanced-setup-optional",level:2},{value:"SSG",id:"ssg",level:3},{value:"SSR",id:"ssr",level:3},{value:"4. Use in Pages",id:"4-use-in-pages",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"usage",children:"Usage"})}),"\n",(0,a.jsx)(n.h2,{id:"1-create-messages",children:"1. Create Messages"}),"\n",(0,a.jsx)(n.p,{children:"Create message files for each locale."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:'// src/messages/en.ts\nexport default {\n  common: {\n    title: "My Site",\n    description: "Welcome"\n  }\n}\n\n// src/messages/ja.ts\nexport default {\n  common: {\n    title: "\u30de\u30a4\u30b5\u30a4\u30c8",\n    description: "\u3088\u3046\u3053\u305d"\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"2-define-i18n-instance",children:"2. Define i18n Instance"}),"\n",(0,a.jsxs)(n.p,{children:["Import ",(0,a.jsx)(n.code,{children:"define"})," from ",(0,a.jsx)(n.code,{children:"@i18n-tiny/astro"})," to create your instance."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// src/i18n.ts\nimport { define } from '@i18n-tiny/astro'\nimport en from './messages/en'\nimport ja from './messages/ja'\n\nexport const { getMessages, getTranslations } = define({\n  messages: { en, ja }\n})\n"})}),"\n",(0,a.jsx)(n.h2,{id:"3-advanced-setup-optional",children:"3. Advanced Setup (Optional)"}),"\n",(0,a.jsx)(n.p,{children:"Depending on your project's output mode, you can add an Integration (for SSG) or Middleware (for SSR)."}),"\n",(0,a.jsx)(n.h3,{id:"ssg",children:"SSG"}),"\n",(0,a.jsxs)(n.p,{children:["Use the Integration if you want to copy the default locale's content to the root directory after build, allowing access without a prefix (e.g., ",(0,a.jsx)(n.code,{children:"/about"})," instead of ",(0,a.jsx)(n.code,{children:"/en/about"}),")."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// astro.config.mjs\nimport { defineConfig } from 'astro/config'\nimport { create } from '@i18n-tiny/astro/integration'\n\nexport default defineConfig({\n  output: 'static', // Default\n  integrations: [\n    create({ defaultLocale: 'en' })\n  ]\n})\n"})}),"\n",(0,a.jsx)(n.h3,{id:"ssr",children:"SSR"}),"\n",(0,a.jsx)(n.p,{children:"Use the Middleware for Server-Side Rendering to handle language detection and redirects."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// src/middleware.ts\nimport { defineMiddleware } from 'astro/middleware'\nimport { create } from '@i18n-tiny/astro/middleware'\n\nexport const onRequest = defineMiddleware(\n  create({\n    locales: ['en', 'ja'],\n    defaultLocale: 'en'\n  })\n)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"4-use-in-pages",children:"4. Use in Pages"}),"\n",(0,a.jsxs)(n.p,{children:["Retrieve messages within your ",(0,a.jsx)(n.code,{children:"[locale]"})," directory."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-astro",children:"---\n// src/pages/[locale]/index.astro\nimport { getMessages } from '../../i18n'\nconst { locale } = Astro.params\n\nconst messages = getMessages(locale)\n---\n\n<html lang={locale}>\n  <body>\n    <h1>{messages.common.title}</h1>\n  </body>\n</html>\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>o});var t=s(6540);const a={},i=t.createContext(a);function r(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);